$(function(){$(".main, .footer").addClass("blur"),$(window).width()<=1024&&$("img[mob-src]").each(function(){var e=$(this).attr("mob-src");$(this).attr("src",e)}),$(document).ready(function(){$(".main, .footer").removeClass("blur");var n=$(".header").innerHeight();$("body").on("click",".header__burger",function(e){e.preventDefault(),$(this).toggleClass("toggled"),$(".header").toggleClass("mobile-nav"),$(".header__mobile").toggleClass("toggled"),$(".section").toggleClass("opened-menu"),$("body").toggleClass("body-fixed"),$(".current-block").fadeToggle(150)}),$(".header__mobile").on("click",".nav a",function(){$(".header").removeClass("mobile-nav"),$(".header__mobile, .header__burger").removeClass("toggled"),$(".section").toggleClass("opened-menu"),$("body").toggleClass("body-fixed"),$(".current-block").fadeToggle(150);var e=$(this).attr("href");e.length&&"#"!=e&&0!=$(e).length&&(event.preventDefault(),$("html, body").stop().animate({scrollTop:$(e).offset().top-n},800))}),$(".btn").each(function(){$(this).attr("data-text",$(this).text())}),$(window).scrollTop()>=$(".header").next().outerHeight()+20?$(".header").addClass("sticky").next().css("margin-top",$(".header").outerHeight()):$(".header").next().css("margin-top",0);var t=$(window).scrollTop();$(window).scroll(function(){var e=$(window).scrollTop();e<200&&$(".section--banner").css({backgroundPositionY:0}),e<$(".section--banner").outerHeight()&&($(".section--banner").css({backgroundPositionY:.2*e}),$(".section--banner .banner__img, .section--banner .section__title").css({top:.6*e,opacity:1-.003*e})),e<$(".section--banner").outerHeight()&&$(".current-block").fadeOut(100),e>=$(".section--banner").outerHeight()+40?($(".header").addClass("sticky"),$(".current-block").fadeIn(400)):e<t&&$(".header").removeClass("sticky"),t=e}),$(document).on("click",'a[href*="#"]',function(e){var t=$(this).attr("href");e.preventDefault(),t.length&&"#"!=t&&(e.preventDefault(),0!=$(t).length&&$("html, body").stop().animate({scrollTop:$(t).offset().top-n},800))}),$(".scroll-next").each(function(){var t=$(this).parents(".section, section").next().offset().top;$(this).on("click",function(e){e.preventDefault(),$("html,body").animate({scrollTop:t-n},800)})});var r=$(".current-block"),e=$(document).find(".section");for(i=0;i<e.length;i++){if(e.eq(i).attr("id")){var o=e.eq(i).attr("id");console.log(o)}else o="";r.append('<a class="current-block__index" href="#'+o+'" data-id="section-'+i+'"></a>')}$(0!=".section--banner".length)&&r.hide(0),$.fn.isInViewport=function(){var e=$(this).offset().top,t=e+$(this).outerHeight(),n=$(window).scrollTop(),r=n+$(window).height()/2;return n<=t&&e<=r},$(".current-block__index").eq(0).addClass("current"),2*$(window).scrollTop()>=$(window).height()&&r.attr("data-color",""),$(window).on("resize scroll",function(){$(".section").each(function(e,t){var n=$(this);n.isInViewport()&&(r.find(".current-block__index").removeClass("current"),$(".header__nav a").removeClass("current"),r.find(".current-block__index").eq(e).addClass("current"),$('.header__nav a[href="#'+n.attr("id")+'"]').addClass("current"),n.attr("data-color")?(r.attr("data-color",""),r.attr("data-color",n.attr("data-color"))):r.attr("data-color",""))})}),$(".faq__item").on("click",".faq__quest",function(){$(this).toggleClass("opened").parent().toggleClass("active").find(".faq__answ").slideToggle(400)}),AOS.init({disable:"phone",duration:1200})})}),$(function(){$(".multiple-input"),$(".additional-images");Array.prototype.remove=function(e){this.splice(-1==this.indexOf(e)?this.length:this.indexOf(e),1)},$('input[type="file"]').on("change",function(){var e=this.files,t=e.length<12?e.length:12,n=$(this),r=n.parent(".file-space");if(null!=e&&0!=e.length)for(var o=0;o<t;o++){var i=e[o];if(!FileReader)return void alert("Ваш браузер не поддерживает загрузку фотографий.");var a=new FileReader;a.onload=function(e){n.removeClass("error"),r.css({backgroundImage:"url("+e.target.result+")"}).removeClass("error"),r.find(".file-space__change").fadeIn(100).siblings(".file-space__text").hide(0)},a.onerror=function(e){alert("ERROR: "+e.target.error.code)},a.readAsDataURL(i)}}),$("form").submit(function(e){e.preventDefault();var t=$(this).find("input"),r=[];if(t.each(function(e,t){if(0==$(t).val().length&&"insta"!=$(t).attr("name")){var n=$(t).val("");n.addClass("error").parent(".file-space").addClass("error"),$(this).siblings(".input__dropdown").find(".drop-current").addClass("error"),r.push(n.attr("placeholder")),$(".form__response").fadeIn(300).html('Обязательные поля "<u>'+r.join(", ")+'"</u> не выбраны или незаполнены'),$(this).on("input change",function(){0<$(this).val().length?($(this).removeClass("error"),r.remove($(t).attr("placeholder"))):($(this).addClass("error"),r.push(n.attr("placeholder")),$(".form__response").fadeIn(300).html('Обязательные поля "<u>'+r.join(", ")+'"</u> не выбраны или незаполнены')),0==r.length?$(".form__response").hide(300):$(".form__response").fadeIn(300).html('Обязательные поля "<u>'+r.join(", ")+'"</u> не выбраны или незаполнены')})}else $(this).removeClass("error").parent(".file-space").removeClass("error"),$(this).siblings(".input__dropdown").find(".drop-current").removeClass("error")}),0==r.length){var n=new FormData(this);$.ajax({type:"POST",url:"send.php",data:n,cache:!1,enctype:"multipart/form-data",processData:!1,contentType:!1,beforeSend:function(e){$(".form__loading").fadeIn(300),$("form").find(".btn").attr("disabled","disabled")},success:function(e){console.log("sent ok"),$(".form__response").fadeIn(100).text("Заявка отправлена. С Вами свяжутся в ближайшее время"),$(".form__loading").fadeOut(0),$("form").find(".btn").removeAttr("disabled"),setTimeout(function(){$(".form__response").fadeOut(300)},4e3),t.each(function(e,t){$(t).val("")}),$(".file-space").removeAttr("style").find(".file-space__change").fadeOut(0).siblings(".file-space__text").fadeIn(100),$(".contact__response").fadeIn(),$(".contact__area").hide(0)},error:function(e){console.log("sent nOk"),$(".form__loading").fadeOut(0),$("form").find(".btn").removeAttr("disabled"),$(".form__response").fadeIn(100).text("Что-то не так ... попробуйте позже"),$(".contact__response").fadeIn(),$(".contact__area").hide(0)}})}}),$("#phone").mask("+7 (999) 999-99-99"),$.get("https://api.sypexgeo.net/",function(e){$("#city").val(e.city.name_ru)},"json")});var inputDrop=$(".input__dropdown");inputDrop.each(function(e,t){inputSiblHidden=$(this).siblings('input[type="hidden"]'),inputDropCurrent=$(this).find(".drop-current"),inputDropList=$(this).find(".drop-list"),0!=inputSiblHidden.val().length&&inputDropCurrent.text(inputSiblHidden.val()),$(this).on("click",function(){$(t).not(this).removeClass("toggled"),$(this).toggleClass("toggled")}),inputDropList.on("click","li",function(e){e.preventDefault();var t=$(this).attr("value");inputDropCurrent.text(t).removeClass("error"),inputSiblHidden.val(t).bind("input")})});var mySwiper=new Swiper(".swiper-container",{speed:800,slidesPerView:2,spaceBetween:20,loop:!0,pagination:{el:".swiper-pagination",clickable:!0},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},breakpoints:{1024:{spaceBetween:10},680:{slidesPerView:1,spaceBetween:10},576:{slidesPerView:1,spaceBetween:10}}});